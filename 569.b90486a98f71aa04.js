"use strict";(self.webpackChunkrelevent=self.webpackChunkrelevent||[]).push([[569],{5569:(I,p,s)=>{s.r(p),s.d(p,{EventsModule:()=>v});var u=s(6895),m=s(5964),h=s(5698),e=s(1571);class C{constructor(t){this.imgUrl=t.imgUrl,this.title=t.title,this.id=`xz${Math.floor(1e6*Math.random())}xz`}}var y=s(4004);class i{constructor(){this._events=[],this.onInit()}get events(){return this._events}onInit(){const t=localStorage.getItem("event-concerts");if(null!==t){const n=JSON.parse(t);this._events=n}}create(t){const n=new C(t);return this._events.push(n),localStorage.setItem("event-concerts",JSON.stringify(this._events)),n}getEventConcertsByUser(t){return t.pipe((0,y.U)(n=>this._events.map(null!==n?c=>{const g=n.addedEventConcerts.find(d=>d.id===c.id);if(void 0!==g){const d=Object.assign({},g);return d.buyed=!0,d}return c.buyed=!1,c}:r=>({...r,buyed:!1}))))}}i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"});var E=s(384),x=s(6391),S=s(6290),U=s(6526),f=s(4859);function O(o,t){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e._UZ(2,"img",10),e.TgZ(3,"div",11),e._uU(4),e.qZA(),e.TgZ(5,"button",12),e.NdJ("click",function(){const g=e.CHM(n).$implicit,d=e.oxw(3);return e.KtG(d.addEventConcertToUser(g))}),e._uU(6),e.qZA()(),e.BQk()}if(2&o){const n=t.$implicit;e.xp6(1),e.uIk("data-card-id",n.id),e.xp6(1),e.Q6J("src",n.imgUrl,e.LSH),e.xp6(2),e.hij(" ",n.title," "),e.xp6(1),e.Q6J("disabled",n.buyed),e.xp6(1),e.hij(" ",n.buyed?"Purchased":"Buy"," ")}}function P(o,t){if(1&o&&(e.ynx(0),e.YNc(1,O,7,5,"ng-container",8),e.BQk()),2&o){const n=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",n)}}function B(o,t){if(1&o&&(e.ynx(0),e.YNc(1,P,2,1,"ng-container",7),e.BQk()),2&o){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",0!==n.length)}}class l{constructor(t,n,r){this.eventsService=t,this.authService=n,this.userService=r,this.eventConcerts$=this.eventsService.getEventConcertsByUser(this.authService.user$),this.user$=this.authService.user$,console.log(this.eventsService)}addEventConcertToUser(t){this.user$.pipe((0,h.q)(1)).subscribe(n=>{if(null!==n){const r=Object.assign({},t);delete r.buyed;const c=this.userService.addEventConcertByUserEmail(n,r);null!==c&&(this.authService.updateUser(c),t.buyed=!0)}})}}l.\u0275fac=function(t){return new(t||l)(e.Y36(i),e.Y36(E.e),e.Y36(x.K))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-page-events"]],decls:10,vars:3,consts:[[1,"page"],[1,"header"],[1,"main"],[1,"section","section_events"],[1,"container"],[1,"events"],[1,"event-card-wrapper"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"event-card"],[1,"event-card__img",3,"src"],[1,"event-card__title"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-header",1),e.TgZ(2,"main",2)(3,"section",3)(4,"div",4)(5,"div",5)(6,"div",6),e.YNc(7,B,2,1,"ng-container",7),e.ALo(8,"async"),e.qZA()()()()(),e._UZ(9,"app-footer"),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngIf",e.lcZ(8,1,n.eventConcerts$)))},dependencies:[u.sg,u.O5,S.G,U.c,f.lW,u.Ov],styles:[".section_events[_ngcontent-%COMP%]{padding:40px 0}.event-card-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,200px);justify-content:center;gap:50px}.event-card[_ngcontent-%COMP%]{display:grid;grid-auto-rows:auto;place-items:start;gap:10px}"]});const Z=[{path:"",component:l}];class a{}a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.Bz.forChild(Z),m.Bz]});var T=s(9718),M=s(2735);class v{}v.\u0275fac=function(t){return new(t||v)},v.\u0275mod=e.oAB({type:v}),v.\u0275inj=e.cJS({imports:[u.ez,a,T.O,M._,f.ot]})}}]);