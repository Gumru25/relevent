"use strict";(self.webpackChunkrelevent=self.webpackChunkrelevent||[]).push([[569],{5569:(T,p,o)=>{o.r(p),o.d(p,{EventsModule:()=>v});var g=o(6895),m=o(5964),h=o(5698),e=o(1571);class y{constructor(t){this.imgUrl=t.imgUrl,this.title=t.title,this.id=`xz${Math.floor(1e6*Math.random())}xz`}}var C=o(4004);class c{constructor(){this._events=[],this.onInit()}get events(){return this._events}onInit(){const t=localStorage.getItem("event-concerts");if(null!==t){const n=JSON.parse(t);this._events=n}else this.create4EventConcerts()}create4EventConcerts(){this.create({imgUrl:"assets/img/valery.jpg",title:"Valery Meladze"}),this.create({imgUrl:"assets/img/evgeny_grinko.jfif",title:"Evgeny Grinko"}),this.create({imgUrl:"assets/img/onegin.jfif",title:"Eugene Onegin"}),this.create({imgUrl:"assets/img/edis.jfif",title:"Edis"})}create(t){const n=new y(t);return this._events.push(n),localStorage.setItem("event-concerts",JSON.stringify(this._events)),n}getEventConcertsByUser(t){return t.pipe((0,C.U)(n=>this._events.map(null!==n?i=>{const u=n.addedEventConcerts.find(l=>l.id===i.id);if(void 0!==u){const l=Object.assign({},u);return l.buyed=!0,l}return i.buyed=!1,i}:r=>({...r,buyed:!1}))))}}c.\u0275fac=function(t){return new(t||c)},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var E=o(384),x=o(6391),U=o(6290),S=o(6526),f=o(4859);function O(s,t){if(1&s){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e._UZ(2,"img",10),e.TgZ(3,"div",11),e._uU(4),e.qZA(),e.TgZ(5,"button",12),e.NdJ("click",function(){const u=e.CHM(n).$implicit,l=e.oxw(3);return e.KtG(l.addEventConcertToUser(u))}),e._uU(6),e.qZA()(),e.BQk()}if(2&s){const n=t.$implicit;e.xp6(1),e.uIk("data-card-id",n.id),e.xp6(1),e.Q6J("src",n.imgUrl,e.LSH),e.xp6(2),e.hij(" ",n.title," "),e.xp6(1),e.Q6J("disabled",n.buyed),e.xp6(1),e.hij(" ",n.buyed?"Purchased":"Buy"," ")}}function P(s,t){if(1&s&&(e.ynx(0),e.YNc(1,O,7,5,"ng-container",8),e.BQk()),2&s){const n=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",n)}}function j(s,t){if(1&s&&(e.ynx(0),e.YNc(1,P,2,1,"ng-container",7),e.BQk()),2&s){const n=t.ngIf;e.xp6(1),e.Q6J("ngIf",0!==n.length)}}class d{constructor(t,n,r){this.eventsService=t,this.authService=n,this.userService=r,this.eventConcerts$=this.eventsService.getEventConcertsByUser(this.authService.user$),this.user$=this.authService.user$,console.log(this.eventsService)}addEventConcertToUser(t){this.user$.pipe((0,h.q)(1)).subscribe(n=>{if(null!==n){const r=Object.assign({},t);delete r.buyed;const i=this.userService.addEventConcertByUserEmail(n,r);null!==i&&(this.authService.updateUser(i),t.buyed=!0)}})}}d.\u0275fac=function(t){return new(t||d)(e.Y36(c),e.Y36(E.e),e.Y36(x.K))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-page-events"]],decls:10,vars:3,consts:[[1,"page"],[1,"header"],[1,"main"],[1,"section","section_events"],[1,"container"],[1,"events"],[1,"event-card-wrapper"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"event-card"],[1,"event-card__img",3,"src"],[1,"event-card__title"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-header",1),e.TgZ(2,"main",2)(3,"section",3)(4,"div",4)(5,"div",5)(6,"div",6),e.YNc(7,j,2,1,"ng-container",7),e.ALo(8,"async"),e.qZA()()()()(),e._UZ(9,"app-footer"),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngIf",e.lcZ(8,1,n.eventConcerts$)))},dependencies:[g.sg,g.O5,U.G,S.c,f.lW,g.Ov],styles:[".section_events[_ngcontent-%COMP%]{padding:40px 0}.event-card-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,200px);justify-content:center;gap:50px}.event-card[_ngcontent-%COMP%]{display:grid;grid-auto-rows:auto;place-items:start;gap:10px}"]});const B=[{path:"",component:d}];class a{}a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.Bz.forChild(B),m.Bz]});var Z=o(9718),M=o(2735);class v{}v.\u0275fac=function(t){return new(t||v)},v.\u0275mod=e.oAB({type:v}),v.\u0275inj=e.cJS({imports:[g.ez,a,Z.O,M._,f.ot]})}}]);